version: "3.9"

services:
  release-explainer:
    image: python:3.11-slim
    container_name: release-explainer
    working_dir: /app
    volumes:
      - ./app:/app
    command: ["sh", "-c", "pip install -r requirements.txt && uvicorn app:app --host 0.0.0.0 --port 8000"]
    environment:
      # If running directly on the DGX:
      # Model Runner REST base
      - MODEL_API_URL=http://model-runner.docker.internal/engines/v1
      # Or, if youâ€™re accessing via SSH tunnel on your laptop, change this to:
      # MODEL_API_URL=http://host.docker.internal:12435/engines/v1
      - MODEL_NAME=ai/qwen3-coder
    ports:
      - "8000:8000"

